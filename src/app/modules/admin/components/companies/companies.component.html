<div class="p-3">
  <h1>Compañias</h1>

  <button
    type="button "
    class="btn btn-primary"
    data-bs-toggle="modal"
    data-bs-target="#companyModal"
    (click)="this.company = undefined"
  >
    Agregar +
  </button>

  <section id="filters" class="row mt-3 p-3 bg-info">
    <div class="col">
      <div class="form-floating">
        <input
          id="inputName"
          type="text"
          class="form-control"
          placeholder="Nombre de la Sociedad"
          #inputName
          (keyup)="(inputName)"
        />
        <label for="inputName"> Nombre de la Sociedad </label>
      </div>
    </div>
    <!-- <div class="col-5">
      <div class="form-floating">
        <input
          id="inputAddress"
          type="text"
          class="form-control"
          placeholder="Empresa"
          #inputAddress
          (keyup)="(inputAddress)"
        />
        <label for="inputAddress"> Dirección </label>
      </div>
    </div> -->
  </section>

  <section id="companys-info" class="my-3">
    <div class="row p-0 m-0">
      @for(company of companies | filterKeyValue : 'name' : inputName.value; let
      i_company = $index ; track i_company ) {
      <div class="card m-2 px-0" style="width: 18rem">
        <!-- <img src="..." class="card-img-top" alt="..."> -->
        <div class="card-header bg-primary d-block text-center">
          <strong> {{ company.name }} </strong>
        </div>
        <div class="card-body">
          <h5 class="card-title">
            {{ company.address }}
          </h5>
          <p class="card-text">
            <i
              class="bi bi-pencil btn btn-outline-primary btn-sm me-4"
              data-bs-toggle="modal"
              data-bs-target="#companyModal"
              (click)="editCompany(company)"
            ></i>
            <i
              class="bi bi-trash btn btn-outline-danger btn-sm"
              (click)="removeCompany(company, i_company)"
            ></i>
          </p>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item py-1">
            <small> {{ company.cif }} </small>
          </li>
          <li class="list-group-item py-1">
            <small> {{ company.account }} </small>
          </li>
        </ul>
      </div>
      }
    </div>
  </section>
</div>

<app-company-modal
  [company]="this.company"
  (onSaveForm)="updateCompany($event)"
></app-company-modal>
